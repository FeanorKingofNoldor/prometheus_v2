<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4624px" preserveAspectRatio="none" style="width:3589px;height:4624px;" version="1.1" viewBox="0 0 3589 4624" width="3589px" zoomAndPan="magnify"><defs><filter height="300%" id="f14nflnispbx65" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="460" x="1560" y="29.2419">Prometheus v2 - Live Trading Flow (US_EQ, Single Day)</text><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="264.6481" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="278.4078"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="131.8241" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="635.468"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="74.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="916.1161"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="308.3541" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="1364.2943"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="169.5301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="3590.0674"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="657" y="315.1138"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="781.5" y="1401.0004"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1147.5" y="1711.3545"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1389.5" y="2130.8267"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1659.5" y="2423.4748"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2010.5" y="2855.947"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2313.5" y="3180.3012"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2678.5" y="3626.7734"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="189.2361" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2889.5" y="3914.4215"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="180.2361" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2889.5" y="4188.0696"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3098.5" y="3990.8335"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="240.6481" style="stroke: #000000; stroke-width: 2.0;" width="3206" x="159" y="3871.0095"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="235" x2="235" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="529.5" x2="529.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="661.5" x2="661.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="786.5" x2="786.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1152" x2="1152" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1394.5" x2="1394.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1664" x2="1664" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2015.5" x2="2015.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2318" x2="2318" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2683.5" x2="2683.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2894.5" x2="2894.5" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3103" x2="3103" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3215" x2="3215" y1="127.5838" y2="4534.8358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3313" x2="3313" y1="127.5838" y2="4534.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="123.4818">User</text><ellipse cx="26.5" cy="51.5158" fill="#FEFECE" filter="url(#f14nflnispbx65)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,59.5158 L26.5,86.5158 M13.5,67.5158 L39.5,67.5158 M26.5,86.5158 L13.5,101.5158 M26.5,86.5158 L39.5,101.5158 " fill="none" filter="url(#f14nflnispbx65)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="8" y="4548.8018">User</text><ellipse cx="26.5" cy="4562.9037" fill="#FEFECE" filter="url(#f14nflnispbx65)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26.5,4570.9037 L26.5,4597.9037 M13.5,4578.9037 L39.5,4578.9037 M26.5,4597.9037 L13.5,4612.9037 M26.5,4597.9037 L39.5,4612.9037 " fill="none" filter="url(#f14nflnispbx65)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="169" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="176" y="111.4818">DAGOrchestrator</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="169" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="176" y="4555.8018">DAGOrchestrator</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="463.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="470.5" y="111.4818">TradingCalendar</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="463.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="470.5" y="4555.8018">TradingCalendar</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="605.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="612.5" y="111.4818">DataIngestion</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="605.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="612.5" y="4555.8018">DataIngestion</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="728.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="735.5" y="111.4818">RegimeEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="728.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="735.5" y="4555.8018">RegimeEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1093" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1100" y="111.4818">StabilityEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="1093" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="1100" y="4555.8018">StabilityEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="1315.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="1322.5" y="111.4818">FragilityAlphaEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="1315.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="1322.5" y="4555.8018">FragilityAlphaEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="1592" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="1599" y="111.4818">AssessmentEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="1592" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="1599" y="4555.8018">AssessmentEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="1953.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="1960.5" y="111.4818">UniverseEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="1953.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="1960.5" y="4555.8018">UniverseEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="2258" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="2265" y="111.4818">PortfolioEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="2258" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="2265" y="4555.8018">PortfolioEngine</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2628.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2635.5" y="111.4818">OrderPlanner</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="2628.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="92" x="2635.5" y="4555.8018">OrderPlanner</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="2850.5" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="2857.5" y="111.4818">LiveBroker</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="2850.5" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="2857.5" y="4555.8018">LiveBroker</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="3048" y="89.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="3055" y="111.4818">IBKR Gateway</text><rect fill="#FEFECE" filter="url(#f14nflnispbx65)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="3048" y="4533.8358"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="3055" y="4555.8018">IBKR Gateway</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="3169" y="123.4818">historical_db</text><path d="M3197,72.5158 C3197,62.5158 3215,62.5158 3215,62.5158 C3215,62.5158 3233,62.5158 3233,72.5158 L3233,98.5158 C3233,108.5158 3215,108.5158 3215,108.5158 C3215,108.5158 3197,108.5158 3197,98.5158 L3197,72.5158 " fill="#FEFECE" filter="url(#f14nflnispbx65)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M3197,72.5158 C3197,82.5158 3215,82.5158 3215,82.5158 C3215,82.5158 3233,82.5158 3233,72.5158 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="86" x="3169" y="4548.8018">historical_db</text><path d="M3197,4562.9037 C3197,4552.9037 3215,4552.9037 3215,4552.9037 C3215,4552.9037 3233,4552.9037 3233,4562.9037 L3233,4588.9037 C3233,4598.9037 3215,4598.9037 3215,4598.9037 C3215,4598.9037 3197,4598.9037 3197,4588.9037 L3197,4562.9037 " fill="#FEFECE" filter="url(#f14nflnispbx65)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M3197,4562.9037 C3197,4572.9037 3215,4572.9037 3215,4572.9037 C3215,4572.9037 3233,4572.9037 3233,4562.9037 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="3271" y="123.4818">runtime_db</text><path d="M3295,72.5158 C3295,62.5158 3313,62.5158 3313,62.5158 C3313,62.5158 3331,62.5158 3331,72.5158 L3331,98.5158 C3331,108.5158 3313,108.5158 3313,108.5158 C3313,108.5158 3295,108.5158 3295,98.5158 L3295,72.5158 " fill="#FEFECE" filter="url(#f14nflnispbx65)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M3295,72.5158 C3295,82.5158 3313,82.5158 3313,82.5158 C3313,82.5158 3331,82.5158 3331,72.5158 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="3271" y="4548.8018">runtime_db</text><path d="M3295,4562.9037 C3295,4552.9037 3313,4552.9037 3313,4552.9037 C3313,4552.9037 3331,4552.9037 3331,4562.9037 L3331,4588.9037 C3331,4598.9037 3313,4598.9037 3313,4598.9037 C3313,4598.9037 3295,4598.9037 3295,4588.9037 L3295,4562.9037 " fill="#FEFECE" filter="url(#f14nflnispbx65)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M3295,4562.9037 C3295,4572.9037 3313,4572.9037 3313,4572.9037 C3313,4572.9037 3331,4572.9037 3331,4562.9037 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="264.6481" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="278.4078"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="131.8241" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="635.468"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="74.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="916.1161"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="308.3541" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="1364.2943"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="169.5301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="230.5" y="3590.0674"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="657" y="315.1138"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="781.5" y="1401.0004"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1147.5" y="1711.3545"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1389.5" y="2130.8267"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1659.5" y="2423.4748"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2010.5" y="2855.947"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2313.5" y="3180.3012"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="63.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2678.5" y="3626.7734"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="189.2361" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2889.5" y="3914.4215"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="180.2361" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2889.5" y="4188.0696"/><rect fill="#FFFFFF" filter="url(#f14nflnispbx65)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="3098.5" y="3990.8335"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="159.4368"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="159.4368" y2="159.4368"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="162.4368" y2="162.4368"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="156" x="1712" y="147.5838"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="1718" y="165.4808">T-1 Day: Market Close</text><polygon fill="#A80036" points="246.5,202.9958,236.5,206.9958,246.5,210.9958,242.5,206.9958" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="528.5" y1="206.9958" y2="206.9958"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="252.5" y="201.1868">get_market_state("US_EQ", now())</text><polygon fill="#A80036" points="517.5,234.7018,527.5,238.7018,517.5,242.7018,521.5,238.7018" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="523.5" y1="238.7018" y2="238.7018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="242.5" y="232.8928">MarketState.POST_CLOSE</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="282.5" y1="265.4078" y2="265.4078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282.5" x2="282.5" y1="265.4078" y2="278.4078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="241.5" x2="282.5" y1="278.4078" y2="278.4078"/><polygon fill="#A80036" points="251.5,274.4078,241.5,278.4078,251.5,282.4078,247.5,278.4078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="247.5" y="259.5988">schedule_dag("us_eq_ingest_T")</text><polygon fill="#A80036" points="645,311.1138,655,315.1138,645,319.1138,649,315.1138" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="651" y1="315.1138" y2="315.1138"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="247.5" y="309.3048">ingest_prices("US_EQ", date=T-1)</text><polygon fill="#A80036" points="3203,342.8199,3213,346.8199,3203,350.8199,3207,346.8199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="667" x2="3209" y1="346.8199" y2="346.8199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="674" y="341.0109">INSERT INTO prices_daily</text><polygon fill="#A80036" points="3203,374.5259,3213,378.5259,3203,382.5259,3207,378.5259" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="667" x2="3209" y1="378.5259" y2="378.5259"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="674" y="372.7169">INSERT INTO returns_daily</text><polygon fill="#A80036" points="251.5,406.2319,241.5,410.2319,251.5,414.2319,247.5,410.2319" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="245.5" x2="661" y1="410.2319" y2="410.2319"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="257.5" y="404.4229">Success</text><polygon fill="#A80036" points="650,437.9379,660,441.9379,650,445.9379,654,441.9379" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="656" y1="441.9379" y2="441.9379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="247.5" y="436.1289">ingest_text_events(date=T-1)</text><polygon fill="#A80036" points="3203,469.6439,3213,473.6439,3203,477.6439,3207,473.6439" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="662" x2="3209" y1="473.6439" y2="473.6439"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="669" y="467.8349">INSERT INTO news_articles</text><polygon fill="#A80036" points="3203,501.3499,3213,505.3499,3203,509.3499,3207,505.3499" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="662" x2="3209" y1="505.3499" y2="505.3499"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="669" y="499.5409">INSERT INTO filings</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="282.5" y1="542.056" y2="542.056"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="282.5" x2="282.5" y1="542.056" y2="555.056"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="282.5" y1="555.056" y2="555.056"/><polygon fill="#A80036" points="245.5,551.056,235.5,555.056,245.5,559.056,241.5,555.056" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="247.5" y="536.247">Success</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="579.909"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="579.909" y2="579.909"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="582.909" y2="582.909"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="266" x="1657" y="568.056"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="249" x="1663" y="585.953">T-1 Evening: Feature &amp; Profile Updates</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="282.5" y1="622.468" y2="622.468"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282.5" x2="282.5" y1="622.468" y2="635.468"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="241.5" x2="282.5" y1="635.468" y2="635.468"/><polygon fill="#A80036" points="251.5,631.468,241.5,635.468,251.5,639.468,247.5,635.468" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="247.5" y="616.659">schedule_dag("us_eq_features_T-1")</text><polygon fill="#A80036" points="3203,668.174,3213,672.174,3203,676.174,3207,672.174" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="3209" y1="672.174" y2="672.174"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="247.5" y="666.365">Compute volatility_daily, factors</text><polygon fill="#A80036" points="251.5,699.88,241.5,703.88,251.5,707.88,247.5,703.88" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="245.5" x2="3214" y1="703.88" y2="703.88"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="257.5" y="698.071">Success</text><polygon fill="#A80036" points="3203,731.586,3213,735.586,3203,739.586,3207,735.586" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="3209" y1="735.586" y2="735.586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="247.5" y="729.777">Update profiles for issuers</text><polygon fill="#A80036" points="246.5,763.2921,236.5,767.2921,246.5,771.2921,242.5,767.2921" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="3214" y1="767.2921" y2="767.2921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="252.5" y="761.4831">ProfileSnapshots updated</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="797.1451"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="797.1451" y2="797.1451"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="800.1451" y2="800.1451"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="280" x="1650" y="785.2921"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="263" x="1656" y="803.1891">T Day Morning: Pre-Open Quality Checks</text><polygon fill="#A80036" points="246.5,840.7041,236.5,844.7041,246.5,848.7041,242.5,844.7041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="528.5" y1="844.7041" y2="844.7041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="252.5" y="838.8951">get_market_state("US_EQ", now())</text><polygon fill="#A80036" points="517.5,872.4101,527.5,876.4101,517.5,880.4101,521.5,876.4101" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="523.5" y1="876.4101" y2="876.4101"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="242.5" y="870.6011">MarketState.PRE_OPEN</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="282.5" y1="903.1161" y2="903.1161"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282.5" x2="282.5" y1="903.1161" y2="916.1161"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="241.5" x2="282.5" y1="916.1161" y2="916.1161"/><polygon fill="#A80036" points="251.5,912.1161,241.5,916.1161,251.5,920.1161,247.5,916.1161" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="247.5" y="897.3071">schedule_dag("us_eq_qc_preopen_T")</text><polygon fill="#A80036" points="3203,948.8221,3213,952.8221,3203,956.8221,3207,952.8221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="3209" y1="952.8221" y2="952.8221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="247.5" y="947.0131">check_data_quality(date=T-1)</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="282.5" y1="989.5282" y2="989.5282"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="282.5" x2="282.5" y1="989.5282" y2="1002.5282"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="282.5" y1="1002.5282" y2="1002.5282"/><polygon fill="#A80036" points="245.5,998.5282,235.5,1002.5282,245.5,1006.5282,241.5,1002.5282" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="247.5" y="983.7192">OK</text><polygon fill="#A80036" points="3301,1025.2342,3311,1029.2342,3301,1033.2342,3305,1029.2342" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="3307" y1="1029.2342" y2="1029.2342"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="242.5" y="1023.4252">check_decisions_logged(date=T-1)</text><polygon fill="#A80036" points="246.5,1056.9402,236.5,1060.9402,246.5,1064.9402,242.5,1060.9402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="3312" y1="1060.9402" y2="1060.9402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="252.5" y="1055.1312">OK</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="1090.7932"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="1090.7932" y2="1090.7932"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="1093.7932" y2="1093.7932"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="159" x="1710.5" y="1078.9402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="1716.5" y="1096.8372">T Day: Market Session</text><polygon fill="#A80036" points="246.5,1134.3522,236.5,1138.3522,246.5,1142.3522,242.5,1138.3522" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="528.5" y1="1138.3522" y2="1138.3522"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="252.5" y="1132.5432">get_market_state("US_EQ", now())</text><polygon fill="#A80036" points="517.5,1188.7643,527.5,1192.7643,517.5,1196.7643,521.5,1192.7643" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="523.5" y1="1192.7643" y2="1192.7643"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="242.5" y="1186.9553">MarketState.SESSION</text><path d="M534,1151.3522 L534,1214.3522 L779,1214.3522 L779,1161.3522 L769,1151.3522 L534,1151.3522 " fill="#FBFB77" filter="url(#f14nflnispbx65)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M769,1151.3522 L769,1161.3522 L779,1161.3522 L769,1151.3522 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="540" y="1170.2492">Market trading...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="540" y="1187.9553">No automated actions during session</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="540" y="1205.6613">(intraday monitors optional)</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="1245.3233"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="1245.3233" y2="1245.3233"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="1248.3233" y2="1248.3233"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="237" x="1671.5" y="1233.4703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="220" x="1677.5" y="1251.3673">T Day: Post-Close - Engine Pipeline</text><polygon fill="#A80036" points="246.5,1288.8823,236.5,1292.8823,246.5,1296.8823,242.5,1292.8823" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="528.5" y1="1292.8823" y2="1292.8823"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="252.5" y="1287.0733">get_market_state("US_EQ", now())</text><polygon fill="#A80036" points="517.5,1320.5883,527.5,1324.5883,517.5,1328.5883,521.5,1324.5883" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="523.5" y1="1324.5883" y2="1324.5883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="242.5" y="1318.7793">MarketState.POST_CLOSE</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="282.5" y1="1351.2943" y2="1351.2943"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282.5" x2="282.5" y1="1351.2943" y2="1364.2943"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="241.5" x2="282.5" y1="1364.2943" y2="1364.2943"/><polygon fill="#A80036" points="251.5,1360.2943,241.5,1364.2943,251.5,1368.2943,247.5,1364.2943" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="247.5" y="1345.4853">schedule_dag("us_eq_engines_T")</text><polygon fill="#A80036" points="769.5,1397.0004,779.5,1401.0004,769.5,1405.0004,773.5,1401.0004" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="775.5" y1="1401.0004" y2="1401.0004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="247.5" y="1395.1914">get_regime(as_of_date=T, region="US")</text><polygon fill="#A80036" points="3203,1428.7064,3213,1432.7064,3203,1436.7064,3207,1432.7064" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="791.5" x2="3209" y1="1432.7064" y2="1432.7064"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="798.5" y="1426.8974">read_prices(instruments, start=T-63, end=T)</text><polygon fill="#A80036" points="251.5,1460.4124,241.5,1464.4124,251.5,1468.4124,247.5,1464.4124" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="245.5" x2="785.5" y1="1464.4124" y2="1464.4124"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="257.5" y="1458.6034">DataFrame</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="786.5" x2="828.5" y1="1496.1184" y2="1496.1184"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="828.5" x2="828.5" y1="1496.1184" y2="1509.1184"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="787.5" x2="828.5" y1="1509.1184" y2="1509.1184"/><polygon fill="#A80036" points="797.5,1505.1184,787.5,1509.1184,797.5,1513.1184,793.5,1509.1184" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="352" x="793.5" y="1490.3094">embed_regime_window(market_id="US_EQ", as_of_date=T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="786.5" x2="828.5" y1="1540.8244" y2="1540.8244"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="828.5" x2="828.5" y1="1540.8244" y2="1553.8244"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="787.5" x2="828.5" y1="1553.8244" y2="1553.8244"/><polygon fill="#A80036" points="797.5,1549.8244,787.5,1553.8244,797.5,1557.8244,793.5,1553.8244" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="793.5" y="1535.0154">classify_regime(embedding)</text><polygon fill="#A80036" points="3301,1581.5304,3311,1585.5304,3301,1589.5304,3305,1585.5304" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="786.5" x2="3307" y1="1585.5304" y2="1585.5304"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="793.5" y="1579.7214">INSERT INTO regimes</text><polygon fill="#A80036" points="3301,1630.9425,3311,1634.9425,3301,1638.9425,3305,1634.9425" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="786.5" x2="3307" y1="1634.9425" y2="1634.9425"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="793.5" y="1611.4275">INSERT INTO engine_decisions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="793.5" y="1629.1335">(decision_id, engine="REGIME", ...)</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="282.5" y1="1671.6485" y2="1671.6485"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="282.5" x2="282.5" y1="1671.6485" y2="1684.6485"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="282.5" y1="1684.6485" y2="1684.6485"/><polygon fill="#A80036" points="245.5,1680.6485,235.5,1684.6485,245.5,1688.6485,241.5,1684.6485" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="247.5" y="1665.8395">RegimeState(label="CARRY", confidence=0.85)</text><polygon fill="#A80036" points="1135.5,1707.3545,1145.5,1711.3545,1135.5,1715.3545,1139.5,1711.3545" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="1141.5" y1="1711.3545" y2="1711.3545"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="242.5" y="1705.5455">compute_stability_batch(entities, as_of_date=T)</text><polygon fill="#A80036" points="3301,1739.0605,3311,1743.0605,3301,1747.0605,3305,1743.0605" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1157.5" x2="3307" y1="1743.0605" y2="1743.0605"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="1164.5" y="1737.2515">get_profiles(entities, as_of_date=T)</text><polygon fill="#A80036" points="246.5,1770.7665,236.5,1774.7665,246.5,1778.7665,242.5,1774.7665" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="1151.5" y1="1774.7665" y2="1774.7665"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="252.5" y="1768.9575">List[ProfileSnapshot]</text><polygon fill="#A80036" points="797.5,1802.4726,787.5,1806.4726,797.5,1810.4726,793.5,1806.4726" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="791.5" x2="1151.5" y1="1806.4726" y2="1806.4726"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="803.5" y="1800.6636">get_regime(as_of_date=T, region="US")</text><polygon fill="#A80036" points="1140.5,1834.1786,1150.5,1838.1786,1140.5,1842.1786,1144.5,1838.1786" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="786.5" x2="1146.5" y1="1838.1786" y2="1838.1786"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="793.5" y="1832.3696">RegimeState</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1152.5" x2="1194.5" y1="1869.8846" y2="1869.8846"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1194.5" x2="1194.5" y1="1869.8846" y2="1882.8846"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1153.5" x2="1194.5" y1="1882.8846" y2="1882.8846"/><polygon fill="#A80036" points="1163.5,1878.8846,1153.5,1882.8846,1163.5,1886.8846,1159.5,1882.8846" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="1159.5" y="1864.0756">_compute_liquidity_score(entity_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1152.5" x2="1194.5" y1="1914.5906" y2="1914.5906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1194.5" x2="1194.5" y1="1914.5906" y2="1927.5906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1153.5" x2="1194.5" y1="1927.5906" y2="1927.5906"/><polygon fill="#A80036" points="1163.5,1923.5906,1153.5,1927.5906,1163.5,1931.5906,1159.5,1927.5906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="1159.5" y="1908.7816">_compute_volatility_score(entity_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1152.5" x2="1194.5" y1="1959.2966" y2="1959.2966"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1194.5" x2="1194.5" y1="1959.2966" y2="1972.2966"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1153.5" x2="1194.5" y1="1972.2966" y2="1972.2966"/><polygon fill="#A80036" points="1163.5,1968.2966,1153.5,1972.2966,1163.5,1976.2966,1159.5,1972.2966" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="1159.5" y="1953.4876">_compute_contagion_risk(entity_id, T)</text><polygon fill="#A80036" points="3301,2000.0026,3311,2004.0026,3301,2008.0026,3305,2004.0026" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1152.5" x2="3307" y1="2004.0026" y2="2004.0026"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="1159.5" y="1998.1936">INSERT INTO stability_vectors</text><polygon fill="#A80036" points="3301,2031.7087,3311,2035.7087,3301,2039.7087,3305,2035.7087" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1152.5" x2="3307" y1="2035.7087" y2="2035.7087"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="1159.5" y="2029.8997">INSERT INTO soft_target_classes</text><polygon fill="#A80036" points="3301,2063.4147,3311,2067.4147,3301,2071.4147,3305,2067.4147" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1152.5" x2="3307" y1="2067.4147" y2="2067.4147"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="1159.5" y="2061.6057">INSERT INTO engine_decisions</text><polygon fill="#A80036" points="1163.5,2095.1207,1153.5,2099.1207,1163.5,2103.1207,1159.5,2099.1207" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1157.5" x2="3312" y1="2099.1207" y2="2099.1207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1169.5" y="2093.3117">Dict[entity_id, StabilityVector]</text><polygon fill="#A80036" points="1377.5,2126.8267,1387.5,2130.8267,1377.5,2134.8267,1381.5,2130.8267" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="1383.5" y1="2130.8267" y2="2130.8267"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="242.5" y="2125.0177">compute_alpha_batch(entities, as_of_date=T, horizon=21)</text><polygon fill="#A80036" points="1163.5,2158.5327,1153.5,2162.5327,1163.5,2166.5327,1159.5,2162.5327" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1157.5" x2="1388.5" y1="2162.5327" y2="2162.5327"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="1169.5" y="2156.7237">get_stability(entities, as_of_date=T)</text><polygon fill="#A80036" points="246.5,2190.2387,236.5,2194.2387,246.5,2198.2387,242.5,2194.2387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="1393.5" y1="2194.2387" y2="2194.2387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="252.5" y="2188.4297">Dict[entity_id, StabilityVector]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1394.5" x2="1436.5" y1="2225.9448" y2="2225.9448"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1436.5" x2="1436.5" y1="2225.9448" y2="2238.9448"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1436.5" y1="2238.9448" y2="2238.9448"/><polygon fill="#A80036" points="1405.5,2234.9448,1395.5,2238.9448,1405.5,2242.9448,1401.5,2238.9448" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="1401.5" y="2220.1358">_compute_weak_profile(entity_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1394.5" x2="1436.5" y1="2270.6508" y2="2270.6508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1436.5" x2="1436.5" y1="2270.6508" y2="2283.6508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1436.5" y1="2283.6508" y2="2283.6508"/><polygon fill="#A80036" points="1405.5,2279.6508,1395.5,2283.6508,1405.5,2287.6508,1401.5,2283.6508" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1401.5" y="2264.8418">_compute_complacent_pricing(entity_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1394.5" x2="1436.5" y1="2315.3568" y2="2315.3568"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1436.5" x2="1436.5" y1="2315.3568" y2="2328.3568"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1436.5" y1="2328.3568" y2="2328.3568"/><polygon fill="#A80036" points="1405.5,2324.3568,1395.5,2328.3568,1405.5,2332.3568,1401.5,2328.3568" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="1401.5" y="2309.5478">_combine_signals(...)</text><polygon fill="#A80036" points="3301,2356.0628,3311,2360.0628,3301,2364.0628,3305,2360.0628" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1394.5" x2="3307" y1="2360.0628" y2="2360.0628"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="1401.5" y="2354.2538">INSERT INTO engine_decisions</text><polygon fill="#A80036" points="1405.5,2387.7688,1395.5,2391.7688,1405.5,2395.7688,1401.5,2391.7688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1399.5" x2="3312" y1="2391.7688" y2="2391.7688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1411.5" y="2385.9598">Dict[entity_id, float]</text><polygon fill="#A80036" points="1647.5,2419.4748,1657.5,2423.4748,1647.5,2427.4748,1651.5,2423.4748" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="1653.5" y1="2423.4748" y2="2423.4748"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="242.5" y="2417.6658">score_strategy_default(strategy_id="main", market_id="US_EQ", as_of_date=T)</text><polygon fill="#A80036" points="797.5,2451.1809,787.5,2455.1809,797.5,2459.1809,793.5,2455.1809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="791.5" x2="1658.5" y1="2455.1809" y2="2455.1809"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="803.5" y="2449.3719">get_regime(as_of_date=T, region="US")</text><polygon fill="#A80036" points="246.5,2482.8869,236.5,2486.8869,246.5,2490.8869,242.5,2486.8869" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="1663.5" y1="2486.8869" y2="2486.8869"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="252.5" y="2481.0779">RegimeState</text><polygon fill="#A80036" points="1405.5,2514.5929,1395.5,2518.5929,1405.5,2522.5929,1401.5,2518.5929" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1399.5" x2="1663.5" y1="2518.5929" y2="2518.5929"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="1411.5" y="2512.7839">get_fragility_alphas(entities, T)</text><polygon fill="#A80036" points="1652.5,2546.2989,1662.5,2550.2989,1652.5,2554.2989,1656.5,2550.2989" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1394.5" x2="1658.5" y1="2550.2989" y2="2550.2989"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1401.5" y="2544.4899">Dict[entity_id, float]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1664.5" x2="1706.5" y1="2582.0049" y2="2582.0049"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706.5" x2="1706.5" y1="2582.0049" y2="2595.0049"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1665.5" x2="1706.5" y1="2595.0049" y2="2595.0049"/><polygon fill="#A80036" points="1675.5,2591.0049,1665.5,2595.0049,1675.5,2599.0049,1671.5,2595.0049" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="1671.5" y="2576.1959">_compute_value_alpha(instrument_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1664.5" x2="1706.5" y1="2626.7109" y2="2626.7109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706.5" x2="1706.5" y1="2626.7109" y2="2639.7109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1665.5" x2="1706.5" y1="2639.7109" y2="2639.7109"/><polygon fill="#A80036" points="1675.5,2635.7109,1665.5,2639.7109,1675.5,2643.7109,1671.5,2639.7109" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="1671.5" y="2620.9019">_compute_momentum_alpha(instrument_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1664.5" x2="1706.5" y1="2671.417" y2="2671.417"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706.5" x2="1706.5" y1="2671.417" y2="2684.417"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1665.5" x2="1706.5" y1="2684.417" y2="2684.417"/><polygon fill="#A80036" points="1675.5,2680.417,1665.5,2684.417,1675.5,2688.417,1671.5,2684.417" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="1671.5" y="2665.608">_compute_quality_alpha(instrument_id, T)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1664.5" x2="1706.5" y1="2716.123" y2="2716.123"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706.5" x2="1706.5" y1="2716.123" y2="2729.123"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1665.5" x2="1706.5" y1="2729.123" y2="2729.123"/><polygon fill="#A80036" points="1675.5,2725.123,1665.5,2729.123,1675.5,2733.123,1671.5,2729.123" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="1671.5" y="2710.314">_combine_alphas(alphas, regime)</text><polygon fill="#A80036" points="3301,2756.829,3311,2760.829,3301,2764.829,3305,2760.829" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1664.5" x2="3307" y1="2760.829" y2="2760.829"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="1671.5" y="2755.02">INSERT INTO instrument_scores</text><polygon fill="#A80036" points="3301,2788.535,3311,2792.535,3301,2796.535,3305,2792.535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1664.5" x2="3307" y1="2792.535" y2="2792.535"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="1671.5" y="2786.726">INSERT INTO engine_decisions</text><polygon fill="#A80036" points="1675.5,2820.241,1665.5,2824.241,1675.5,2828.241,1671.5,2824.241" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1669.5" x2="3312" y1="2824.241" y2="2824.241"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="1681.5" y="2818.432">Dict[instrument_id, InstrumentScore]</text><polygon fill="#A80036" points="1998.5,2851.947,2008.5,2855.947,1998.5,2859.947,2002.5,2855.947" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="2004.5" y1="2855.947" y2="2855.947"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="363" x="242.5" y="2850.138">select(strategy_id="main", market_id="US_EQ", as_of_date=T)</text><polygon fill="#A80036" points="1675.5,2883.6531,1665.5,2887.6531,1675.5,2891.6531,1671.5,2887.6531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1669.5" x2="2009.5" y1="2887.6531" y2="2887.6531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="322" x="1681.5" y="2881.844">get_scores(strategy="main", market="US_EQ", date=T)</text><polygon fill="#A80036" points="246.5,2915.3591,236.5,2919.3591,246.5,2923.3591,242.5,2919.3591" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="2014.5" y1="2919.3591" y2="2919.3591"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="252.5" y="2913.5501">Dict[instrument_id, InstrumentScore]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2015.5" x2="2057.5" y1="2951.0651" y2="2951.0651"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2057.5" x2="2057.5" y1="2951.0651" y2="2964.0651"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2016.5" x2="2057.5" y1="2964.0651" y2="2964.0651"/><polygon fill="#A80036" points="2026.5,2960.0651,2016.5,2964.0651,2026.5,2968.0651,2022.5,2964.0651" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="2022.5" y="2945.2561">filter_by_liquidity(instruments, min_volume=1M)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2015.5" x2="2057.5" y1="2995.7711" y2="2995.7711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2057.5" x2="2057.5" y1="2995.7711" y2="3008.7711"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2016.5" x2="2057.5" y1="3008.7711" y2="3008.7711"/><polygon fill="#A80036" points="2026.5,3004.7711,2016.5,3008.7711,2026.5,3012.7711,2022.5,3008.7711" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="2022.5" y="2989.9621">filter_by_constraints(instruments, constraints)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2015.5" x2="2057.5" y1="3040.4771" y2="3040.4771"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2057.5" x2="2057.5" y1="3040.4771" y2="3053.4771"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2016.5" x2="2057.5" y1="3053.4771" y2="3053.4771"/><polygon fill="#A80036" points="2026.5,3049.4771,2016.5,3053.4771,2026.5,3057.4771,2022.5,3053.4771" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="2022.5" y="3034.6681">_assign_tiers(ranked_instruments)</text><polygon fill="#A80036" points="3301,3081.1831,3311,3085.1831,3301,3089.1831,3305,3085.1831" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2015.5" x2="3307" y1="3085.1831" y2="3085.1831"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="2022.5" y="3079.3741">INSERT INTO universes</text><polygon fill="#A80036" points="3301,3112.8892,3311,3116.8892,3301,3120.8892,3305,3116.8892" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2015.5" x2="3307" y1="3116.8892" y2="3116.8892"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="2022.5" y="3111.0801">INSERT INTO engine_decisions</text><polygon fill="#A80036" points="2026.5,3144.5952,2016.5,3148.5952,2026.5,3152.5952,2022.5,3148.5952" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2020.5" x2="3312" y1="3148.5952" y2="3148.5952"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="2032.5" y="3142.7862">Universe(core=[...], satellite=[...], watchlist=[...])</text><polygon fill="#A80036" points="2301.5,3176.3012,2311.5,3180.3012,2301.5,3184.3012,2305.5,3180.3012" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="2307.5" y1="3180.3012" y2="3180.3012"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="242.5" y="3174.4922">optimize(strategy_id="main", as_of_date=T, universe, scores)</text><polygon fill="#A80036" points="3203,3208.0072,3213,3212.0072,3203,3216.0072,3207,3212.0072" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2323.5" x2="3209" y1="3212.0072" y2="3212.0072"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="2330.5" y="3206.1982">get_correlation_matrix(instruments, window=63)</text><polygon fill="#A80036" points="246.5,3239.7132,236.5,3243.7132,246.5,3247.7132,242.5,3243.7132" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="2317.5" y1="3243.7132" y2="3243.7132"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="252.5" y="3237.9042">ndarray</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2318.5" x2="2360.5" y1="3275.4192" y2="3275.4192"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2360.5" x2="2360.5" y1="3275.4192" y2="3288.4192"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2319.5" x2="2360.5" y1="3288.4192" y2="3288.4192"/><polygon fill="#A80036" points="2329.5,3284.4192,2319.5,3288.4192,2329.5,3292.4192,2325.5,3288.4192" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="351" x="2325.5" y="3269.6102">_build_optimization_problem(universe, scores, constraints)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2318.5" x2="2360.5" y1="3320.1253" y2="3320.1253"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2360.5" x2="2360.5" y1="3320.1253" y2="3333.1253"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2319.5" x2="2360.5" y1="3333.1253" y2="3333.1253"/><polygon fill="#A80036" points="2329.5,3329.1253,2319.5,3333.1253,2329.5,3337.1253,2325.5,3333.1253" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="2325.5" y="3314.3162">_solve_cvxpy(problem)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2318.5" x2="2360.5" y1="3364.8313" y2="3364.8313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2360.5" x2="2360.5" y1="3364.8313" y2="3377.8313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2319.5" x2="2360.5" y1="3377.8313" y2="3377.8313"/><polygon fill="#A80036" points="2329.5,3373.8313,2319.5,3377.8313,2329.5,3381.8313,2325.5,3377.8313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="2325.5" y="3359.0223">_validate_solution(weights, constraints)</text><polygon fill="#A80036" points="3301,3405.5373,3311,3409.5373,3301,3413.5373,3305,3409.5373" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2318.5" x2="3307" y1="3409.5373" y2="3409.5373"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="2325.5" y="3403.7283">INSERT INTO target_portfolios</text><polygon fill="#A80036" points="3301,3437.2433,3311,3441.2433,3301,3445.2433,3305,3441.2433" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2318.5" x2="3307" y1="3441.2433" y2="3441.2433"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="2325.5" y="3435.4343">INSERT INTO portfolio_risk_reports</text><polygon fill="#A80036" points="3301,3468.9493,3311,3472.9493,3301,3476.9493,3305,3472.9493" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2318.5" x2="3307" y1="3472.9493" y2="3472.9493"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="2325.5" y="3467.1403">INSERT INTO engine_decisions</text><polygon fill="#A80036" points="2329.5,3500.6553,2319.5,3504.6553,2329.5,3508.6553,2325.5,3504.6553" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2323.5" x2="3312" y1="3504.6553" y2="3504.6553"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="2335.5" y="3498.8463">Dict[instrument_id, target_weight]</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="3534.5083"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="3534.5083" y2="3534.5083"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="3537.5083" y2="3537.5083"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="167" x="1706.5" y="3522.6553"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="1712.5" y="3540.5523">T Day: Order Execution</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="282.5" y1="3577.0674" y2="3577.0674"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="282.5" x2="282.5" y1="3577.0674" y2="3590.0674"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="241.5" x2="282.5" y1="3590.0674" y2="3590.0674"/><polygon fill="#A80036" points="251.5,3586.0674,241.5,3590.0674,251.5,3594.0674,247.5,3590.0674" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="247.5" y="3571.2584">schedule_dag("us_eq_execution_T")</text><polygon fill="#A80036" points="2666.5,3622.7734,2676.5,3626.7734,2666.5,3630.7734,2670.5,3626.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240.5" x2="2672.5" y1="3626.7734" y2="3626.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="247.5" y="3620.9644">plan_orders(current_positions, target_positions)</text><polygon fill="#A80036" points="2882.5,3654.4794,2892.5,3658.4794,2882.5,3662.4794,2886.5,3658.4794" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2688.5" x2="2888.5" y1="3658.4794" y2="3658.4794"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="2695.5" y="3652.6704">get_positions()</text><polygon fill="#A80036" points="251.5,3686.1854,241.5,3690.1854,251.5,3694.1854,247.5,3690.1854" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="245.5" x2="2682.5" y1="3690.1854" y2="3690.1854"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="257.5" y="3684.3764">Dict[instrument_id, Position]</text><polygon fill="#A80036" points="3301,3717.8914,3311,3721.8914,3301,3725.8914,3305,3721.8914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2683.5" x2="3307" y1="3721.8914" y2="3721.8914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="2690.5" y="3716.0824">read target_portfolios(strategy="main", date=T)</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="282.5" y1="3758.5975" y2="3758.5975"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="282.5" x2="282.5" y1="3758.5975" y2="3771.5975"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="235.5" x2="282.5" y1="3771.5975" y2="3771.5975"/><polygon fill="#A80036" points="245.5,3767.5975,235.5,3771.5975,245.5,3775.5975,241.5,3771.5975" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="247.5" y="3752.7884">Dict[instrument_id, target_weight]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2683.5" x2="2725.5" y1="3798.3035" y2="3798.3035"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2725.5" x2="2725.5" y1="3798.3035" y2="3811.3035"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2684.5" x2="2725.5" y1="3811.3035" y2="3811.3035"/><polygon fill="#A80036" points="2694.5,3807.3035,2684.5,3811.3035,2694.5,3815.3035,2690.5,3811.3035" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="2690.5" y="3792.4945">_compute_deltas(current, target)</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2683.5" x2="2725.5" y1="3848.0095" y2="3848.0095"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2725.5" x2="2725.5" y1="3848.0095" y2="3861.0095"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2678.5" x2="2725.5" y1="3861.0095" y2="3861.0095"/><polygon fill="#A80036" points="2688.5,3857.0095,2678.5,3861.0095,2688.5,3865.0095,2684.5,3861.0095" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="2690.5" y="3842.2005">List[Order]</text><path d="M159,3871.0095 L232,3871.0095 L232,3880.0095 L222,3890.0095 L159,3890.0095 L159,3871.0095 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="240.6481" style="stroke: #000000; stroke-width: 2.0;" width="3206" x="159" y="3871.0095"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="174" y="3885.9065">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="247" y="3884.7684">[for each order]</text><polygon fill="#A80036" points="2877.5,3910.4215,2887.5,3914.4215,2877.5,3918.4215,2881.5,3914.4215" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="235.5" x2="2883.5" y1="3914.4215" y2="3914.4215"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="242.5" y="3908.6125">submit_order(order)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2899.5" x2="2941.5" y1="3946.1275" y2="3946.1275"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2941.5" x2="2941.5" y1="3946.1275" y2="3959.1275"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2900.5" x2="2941.5" y1="3959.1275" y2="3959.1275"/><polygon fill="#A80036" points="2910.5,3955.1275,2900.5,3959.1275,2910.5,3963.1275,2906.5,3959.1275" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="2906.5" y="3940.3185">_translate_order(order)</text><polygon fill="#A80036" points="3086.5,3986.8335,3096.5,3990.8335,3086.5,3994.8335,3090.5,3990.8335" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2899.5" x2="3092.5" y1="3990.8335" y2="3990.8335"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="2906.5" y="3985.0245">placeOrder(contract, ib_order)</text><polygon fill="#A80036" points="2910.5,4018.5396,2900.5,4022.5396,2910.5,4026.5396,2906.5,4022.5396" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2904.5" x2="3102.5" y1="4022.5396" y2="4022.5396"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="2916.5" y="4016.7306">order_id</text><polygon fill="#A80036" points="3301,4067.9516,3311,4071.9516,3301,4075.9516,3305,4071.9516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2899.5" x2="3307" y1="4071.9516" y2="4071.9516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="2906.5" y="4048.4366">INSERT INTO orders</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="2906.5" y="4066.1426">(order_id, status="SUBMITTED", mode="LIVE")</text><polygon fill="#A80036" points="246.5,4099.6576,236.5,4103.6576,246.5,4107.6576,242.5,4103.6576" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="240.5" x2="2893.5" y1="4103.6576" y2="4103.6576"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="252.5" y="4097.8486">order_id</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="4140.5106"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="4140.5106" y2="4140.5106"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="4143.5106" y2="4143.5106"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="201" x="1689.5" y="4128.6576"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="1695.5" y="4146.5546">T Day: Fill Processing (Async)</text><polygon fill="#A80036" points="2910.5,4184.0696,2900.5,4188.0696,2910.5,4192.0696,2906.5,4188.0696" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2904.5" x2="3102.5" y1="4188.0696" y2="4188.0696"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="2916.5" y="4182.2606">onFill(fill_event)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2899.5" x2="2941.5" y1="4219.7757" y2="4219.7757"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2941.5" x2="2941.5" y1="4219.7757" y2="4232.7757"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2900.5" x2="2941.5" y1="4232.7757" y2="4232.7757"/><polygon fill="#A80036" points="2910.5,4228.7757,2900.5,4232.7757,2910.5,4236.7757,2906.5,4232.7757" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="2906.5" y="4213.9667">_handle_fill_event(fill_event)</text><polygon fill="#A80036" points="3301,4278.1877,3311,4282.1877,3301,4286.1877,3305,4282.1877" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2899.5" x2="3307" y1="4282.1877" y2="4282.1877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="2906.5" y="4258.6727">INSERT INTO fills</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="2906.5" y="4276.3787">(fill_id, order_id, price, qty, mode="LIVE")</text><polygon fill="#A80036" points="3301,4309.8937,3311,4313.8937,3301,4317.8937,3305,4313.8937" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2899.5" x2="3307" y1="4313.8937" y2="4313.8937"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="2906.5" y="4308.0847">UPDATE orders SET status="FILLED"</text><polygon fill="#A80036" points="3301,4364.3057,3311,4368.3057,3301,4372.3057,3305,4368.3057" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2894.5" x2="3307" y1="4368.3057" y2="4368.3057"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="203" x="2901.5" y="4362.4967">INSERT INTO positions_snapshots</text><path d="M3318,4326.8937 L3318,4389.8937 L3563,4389.8937 L3563,4336.8937 L3553,4326.8937 L3318,4326.8937 " fill="#FBFB77" filter="url(#f14nflnispbx65)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3553,4326.8937 L3553,4336.8937 L3563,4336.8937 L3553,4326.8937 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="3324" y="4345.7907">After horizon H days,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="3324" y="4363.4967">Kronos computes decision_outcomes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="3324" y="4381.2028">for meta-learning</text><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="3574" x="3" y="4420.8648"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="4420.8648" y2="4420.8648"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="3577" y1="4423.8648" y2="4423.8648"/><rect fill="#EEEEEE" filter="url(#f14nflnispbx65)" height="25.706" style="stroke: #000000; stroke-width: 2.0;" width="249" x="1665.5" y="4409.0118"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="1671.5" y="4426.9088">T+1 Day Morning: Outcome Logging</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="26.5" x2="68.5" y1="4503.8358" y2="4503.8358"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68.5" x2="68.5" y1="4503.8358" y2="4516.8358"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27.5" x2="68.5" y1="4516.8358" y2="4516.8358"/><polygon fill="#A80036" points="37.5,4512.8358,27.5,4516.8358,37.5,4520.8358,33.5,4516.8358" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="33.5" y="4462.6148">System runs continuously</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="33.5" y="4480.3208">DAG orchestrator monitors state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="33.5" y="4498.0268">and triggers next cycle</text><!--MD5=[292de424736aeaf43a57c0e31210d43d]
@startuml Live Trading - Complete Daily Flow

title Prometheus v2 - Live Trading Flow (US_EQ, Single Day)

actor User
participant "DAGOrchestrator" as Orch
participant "TradingCalendar" as Cal
participant "DataIngestion" as Ingest
participant "RegimeEngine" as Regime
participant "StabilityEngine" as Stab
participant "FragilityAlphaEngine" as Frag
participant "AssessmentEngine" as Assess
participant "UniverseEngine" as Univ
participant "PortfolioEngine" as Port
participant "OrderPlanner" as Planner
participant "LiveBroker" as Broker
participant "IBKR Gateway" as IBKR
database "historical_db" as HDB
database "runtime_db" as RDB

== T-1 Day: Market Close ==

Cal -> Orch: get_market_state("US_EQ", now())
return MarketState.POST_CLOSE

Orch -> Orch: schedule_dag("us_eq_ingest_T")
activate Orch

Orch -> Ingest: ingest_prices("US_EQ", date=T-1)
activate Ingest
Ingest -> HDB: INSERT INTO prices_daily
Ingest -> HDB: INSERT INTO returns_daily
return Success

Orch -> Ingest: ingest_text_events(date=T-1)
Ingest -> HDB: INSERT INTO news_articles
Ingest -> HDB: INSERT INTO filings
return Success

deactivate Orch

== T-1 Evening: Feature & Profile Updates ==

Orch -> Orch: schedule_dag("us_eq_features_T-1")
activate Orch

Orch -> HDB: Compute volatility_daily, factors
HDB - -> Orch: Success

Orch -> HDB: Update profiles for issuers
HDB - -> Orch: ProfileSnapshots updated

deactivate Orch

== T Day Morning: Pre-Open Quality Checks ==

Cal -> Orch: get_market_state("US_EQ", now())
return MarketState.PRE_OPEN

Orch -> Orch: schedule_dag("us_eq_qc_preopen_T")
activate Orch

Orch -> HDB: check_data_quality(date=T-1)
return OK

Orch -> RDB: check_decisions_logged(date=T-1)
return OK

deactivate Orch

== T Day: Market Session ==

Cal -> Orch: get_market_state("US_EQ", now())
return MarketState.SESSION

note right: Market trading...\nNo automated actions during session\n(intraday monitors optional)

== T Day: Post-Close - Engine Pipeline ==

Cal -> Orch: get_market_state("US_EQ", now())
return MarketState.POST_CLOSE

Orch -> Orch: schedule_dag("us_eq_engines_T")
activate Orch

Orch -> Regime: get_regime(as_of_date=T, region="US")
activate Regime

Regime -> HDB: read_prices(instruments, start=T-63, end=T)
return DataFrame

Regime -> Regime: embed_regime_window(market_id="US_EQ", as_of_date=T)
Regime -> Regime: classify_regime(embedding)

Regime -> RDB: INSERT INTO regimes
Regime -> RDB: INSERT INTO engine_decisions\n(decision_id, engine="REGIME", ...)

return RegimeState(label="CARRY", confidence=0.85)

Orch -> Stab: compute_stability_batch(entities, as_of_date=T)
activate Stab

Stab -> RDB: get_profiles(entities, as_of_date=T)
return List[ProfileSnapshot]

Stab -> Regime: get_regime(as_of_date=T, region="US")
return RegimeState

Stab -> Stab: _compute_liquidity_score(entity_id, T)
Stab -> Stab: _compute_volatility_score(entity_id, T)
Stab -> Stab: _compute_contagion_risk(entity_id, T)

Stab -> RDB: INSERT INTO stability_vectors
Stab -> RDB: INSERT INTO soft_target_classes
Stab -> RDB: INSERT INTO engine_decisions

return Dict[entity_id, StabilityVector]

deactivate Stab

Orch -> Frag: compute_alpha_batch(entities, as_of_date=T, horizon=21)
activate Frag

Frag -> Stab: get_stability(entities, as_of_date=T)
return Dict[entity_id, StabilityVector]

Frag -> Frag: _compute_weak_profile(entity_id, T)
Frag -> Frag: _compute_complacent_pricing(entity_id, T)
Frag -> Frag: _combine_signals(...)

Frag -> RDB: INSERT INTO engine_decisions
return Dict[entity_id, float]

deactivate Frag

Orch -> Assess: score_strategy_default(strategy_id="main", market_id="US_EQ", as_of_date=T)
activate Assess

Assess -> Regime: get_regime(as_of_date=T, region="US")
return RegimeState

Assess -> Frag: get_fragility_alphas(entities, T)
return Dict[entity_id, float]

Assess -> Assess: _compute_value_alpha(instrument_id, T)
Assess -> Assess: _compute_momentum_alpha(instrument_id, T)
Assess -> Assess: _compute_quality_alpha(instrument_id, T)
Assess -> Assess: _combine_alphas(alphas, regime)

Assess -> RDB: INSERT INTO instrument_scores
Assess -> RDB: INSERT INTO engine_decisions

return Dict[instrument_id, InstrumentScore]

deactivate Assess

Orch -> Univ: select(strategy_id="main", market_id="US_EQ", as_of_date=T)
activate Univ

Univ -> Assess: get_scores(strategy="main", market="US_EQ", date=T)
return Dict[instrument_id, InstrumentScore]

Univ -> Univ: filter_by_liquidity(instruments, min_volume=1M)
Univ -> Univ: filter_by_constraints(instruments, constraints)
Univ -> Univ: _assign_tiers(ranked_instruments)

Univ -> RDB: INSERT INTO universes
Univ -> RDB: INSERT INTO engine_decisions

return Universe(core=[...], satellite=[...], watchlist=[...])

deactivate Univ

Orch -> Port: optimize(strategy_id="main", as_of_date=T, universe, scores)
activate Port

Port -> HDB: get_correlation_matrix(instruments, window=63)
return ndarray

Port -> Port: _build_optimization_problem(universe, scores, constraints)
Port -> Port: _solve_cvxpy(problem)
Port -> Port: _validate_solution(weights, constraints)

Port -> RDB: INSERT INTO target_portfolios
Port -> RDB: INSERT INTO portfolio_risk_reports
Port -> RDB: INSERT INTO engine_decisions

return Dict[instrument_id, target_weight]

deactivate Port

deactivate Orch

== T Day: Order Execution ==

Orch -> Orch: schedule_dag("us_eq_execution_T")
activate Orch

Orch -> Planner: plan_orders(current_positions, target_positions)
activate Planner

Planner -> Broker: get_positions()
return Dict[instrument_id, Position]

Planner -> RDB: read target_portfolios(strategy="main", date=T)
return Dict[instrument_id, target_weight]

Planner -> Planner: _compute_deltas(current, target)

return List[Order]

deactivate Planner

loop for each order
    Orch -> Broker: submit_order(order)
    activate Broker
    
    Broker -> Broker: _translate_order(order)
    Broker -> IBKR: placeOrder(contract, ib_order)
    activate IBKR
    return order_id
    
    Broker -> RDB: INSERT INTO orders\n(order_id, status="SUBMITTED", mode="LIVE")
    
    return order_id
    
    deactivate Broker
end

deactivate Orch

== T Day: Fill Processing (Async) ==

IBKR -> Broker: onFill(fill_event)
activate Broker

Broker -> Broker: _handle_fill_event(fill_event)
Broker -> RDB: INSERT INTO fills\n(fill_id, order_id, price, qty, mode="LIVE")
Broker -> RDB: UPDATE orders SET status="FILLED"
Broker -> RDB: INSERT INTO positions_snapshots

deactivate Broker

== T+1 Day Morning: Outcome Logging ==

note right: After horizon H days,\nKronos computes decision_outcomes\nfor meta-learning

User -> User: System runs continuously\nDAG orchestrator monitors state\nand triggers next cycle

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.9+10-Debian-1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>